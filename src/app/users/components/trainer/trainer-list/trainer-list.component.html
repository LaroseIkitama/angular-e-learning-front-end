<div class="container-fluid page">
  <div class="page__box p-3 mt-2">Liste des utilisateurs</div>
  <div class="page__content shadow p-3 position-relative">
    <div class="page__content-data-list">
      <!-- TABLE -->
      <mat-form-field appearance="standard">
        <mat-label>Faire une recherche</mat-label>
        <input matInput placeholder="search course" search (keyup)="applyFilter($event)" #input>
      </mat-form-field>

      <div class="mat-elevation-z8">
        <table mat-table matSort [dataSource]="dataSource">
          <!-- ID -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Id</th>
            <td mat-cell *matCellDef="let row">{{ row.id }}</td>
          </ng-container>
          <!-- First Name -->
          <ng-container matColumnDef="firstName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Nom</th>
            <td mat-cell *matCellDef="let row"><span style="font-weight: bolder;">{{ row.firstName | uppercase }}</span>
            </td>
          </ng-container>
          <!-- Last Name -->
          <ng-container matColumnDef="lastName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Prénom</th>
            <td mat-cell *matCellDef="let row">{{ row.lastName | titlecase }}</td>
          </ng-container>
          <!-- Email -->
          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
            <td mat-cell *matCellDef="let row"><a href="mailto:">{{ row.email}}</a></td>
          </ng-container>
          <!-- Username -->
          <ng-container matColumnDef="username">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Nom Utilisater</th>
            <td mat-cell *matCellDef="let row">{{ row.username}}</td>
          </ng-container>
          <!-- Website -->
          <ng-container matColumnDef="website">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Site Web</th>
            <td mat-cell *matCellDef="let row"> <span *ngIf="row.website"> <a href="{{ row.website }}">Cliquer pour
                  visiter le site</a></span></td>
          </ng-container>
          <!-- Role -->
          <ng-container matColumnDef="role">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Role</th>
            <td mat-cell *matCellDef="let row">
              <span *ngIf="row.role=='FORMATEUR'"><span class="badge text-bg-success">{{ row.role }}</span></span>
              <span *ngIf="row.role=='ADMIN'"><span class="badge text-bg-dark">{{ row.role }}</span></span>
              <span *ngIf="row.role=='APPRENANT'"><span class="badge text-bg-primary">{{ row.role }}</span></span>

            </td>
          </ng-container>
          <!-- Profile -->
          <ng-container matColumnDef="profile">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Profil</th>
            <td mat-cell *matCellDef="let row">
              <span *ngIf="row.enabled==true"><span class="badge text-bg-info">Activé</span></span>
              <span *ngIf="row.enabled==false"><span class="badge text-bg-danger">Désactiver</span></span>
            </td>
          </ng-container>
          <!-- Actions -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Actions</th>
            <td mat-cell *matCellDef="let row">

              <button class="btn btn-delete" (click)="deleteUser(row)">
                <mat-icon>delete</mat-icon>
              </button>
              <button class="btn btn-edit" [routerLink]="['/update-trainer',row.id]">
                <mat-icon>create</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumn"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumn"></tr>

          <!-- When data does exist -->
          <tr *matNoDataRow>
            <td class="mat-cell" colspan="4">La recherche ne correspond à aucun mots dans la base de donnée "{{
              input.value
              }}"
            </td>
          </tr>
        </table>

        <mat-paginator #paginator [pageSizeOptions]="[4,3,2,1]" arial-label="select page of courses"></mat-paginator>
      </div>
    </div>
  </div>
</div>
